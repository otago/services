SilverStripe\GraphQLDevTools\Controller:
  schemas:
    - default
    - admin
  default_schema: admin

SilverStripe\Control\Director:
  rules:
    "graphql": '%$SilverStripe\GraphQL\Controller.default'

SilverStripe\GraphQL\Controller:
  cors:
    Enabled: true
    Allow-Origin: "*"

SilverStripe\GraphQL\Schema\Schema:
  schemas:
    default:
      types:
        Qualification:
          fields:
            qualificationid: Int
            description1: String
            description2: String
      models:
        SilverStripe\Security\Member:
          fields:
            id: ID!
            qualifications:
              type: "[Qualification]"
          operations:
            read: true
        Services\Graduation\Regalia\Models\Submission:
          fields:
            id: ID!
            trencherSize: Int
            regaliaInfo: String
            deliveryLocation: String
            comments: String
            pickup: Boolean
            gownRequired: Boolean
            trencherRequired: Boolean
            gownLength: String
            preferredGown: String
            gownRequirementsOther: String
            gownInstitutionOther: String
            memberId: ID!
            ceremonyIdsJSON: String
            ceremonies:
              fields:
                nodes:
                  type: "Ceremony"
              operations:
                read: true
                update: true
          operations:
            read:
              plugins:
                filter:
                  fields:
                    memberId: true
            create:
              fields: &editableFields
                id: ID!
                trencherSize: Int
                regaliaInfo: String
                deliveryLocation: String
                comments: String
                pickup: Boolean
                gownRequired: Boolean
                trencherRequired: Boolean
                gownLength: String
                preferredGown: String
                gownRequirementsOther: String
                gownInstitutionOther: String
                ceremonyIdsJSON: String
            update:
              fields: *editableFields
        Services\Graduation\Regalia\Models\Ceremony:
          fields:
            id: ID!
            title: String
          operations:
            read: true

---
Name: load-last
After: "*"
---
SilverStripe\Core\Injector\Injector:
  SilverStripe\GraphQL\QueryHandler\QueryHandlerInterface.default:
    properties:
      Middlewares:
        csrf: false
